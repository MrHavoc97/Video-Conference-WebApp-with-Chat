<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/chatroom/chatroom.css">
    
    <title>!Chatroom</title>
</head>
<body class=" flex px-2 " >
    <script>
        const meetingId = '<%= meetingId %>'  
    </script>

    <div class="container" id="username-div" >
        <h3>Enter your display name :</h3>
        <input type="text"class="input-group-text" name="username" id="username-input" placeholder="Username" autocomplete="off" autofocus >
        <button class='btn  btn-primary' id="stusername-button" onclick="setUsernameAndStart()">Start</button>
    </div>

    <div class="container" id="onMeeting-div" >
        <div class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" id="meetingId-display-div" >
            <h2 class=" fs-5" id="meetingId_h2">Meeting ID :  <input type="text" class="input-group-text" name="meetingId" id="meetingId-display-input"  autocomplete="false" readonly  >
                <button class='btn btn-primary'  onclick="copyToClipboardMeetingId(this)">Copy</button>
            </h2>   
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;    
            <h2 class="fs-5" id="meetingLink_h2">Meeting Link: 
                <input type="text" class="input-group-text" name="meetingId" id="meetingLink-display-input"  autocomplete="false" readonly  >
                <button class='btn btn-primary' onclick="copyToClipboardMeetingLink(this)">Copy</button>
                <span class="fs-6"  >Share this with others and ask them to join !</span>
            </h2>  
            <br>
            <button class='btn btn-sm btn-primary' id="joinMeeting-button"  onclick="joinMeeting()">Join Meeting</button>
            <button class='btn btn-sm btn-primary' id="leaveMeeting-button"  onclick="leaveMeeting()()">Leave</button>
          
        </div>
        <div class="container" id="chat-cover"  >
    
            <div id="chat-div" class=" container " >
                <h3>Chat </h3>
                <div id="chat-content-div" >
                </div>   
                   <input type="text" class="input-group-text  " name="next-message" id="next-message" placeholder="Type here"onkeydown="enterSend(event)" autofocus >
                   <button id="sendMessageButton" class='btn btn-primary' onclick="sendMessage()">send</button>
            </div>

        </div>

    </div>



    <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/chatroom/chatroom.js"></script>

</body>
<%- include ('partials/footer.ejs') %> 
</html>
